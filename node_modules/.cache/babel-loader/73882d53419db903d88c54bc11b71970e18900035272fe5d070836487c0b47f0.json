{"ast":null,"code":"import { ref, onMounted, watchEffect } from \"vue\";\nimport { fetchData } from \"@/utils/axiosFetchApi\";\nexport default {\n  __name: 'SlideShow',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const images = ref([]);\n    const currentIndex = ref(0);\n    const isRunning = ref(false);\n    const delay = ref(5000);\n    const inputDelay = ref(\"\");\n    let timeout = null;\n    const fetchImages = async () => {\n      try {\n        const data = await fetchData(process.env.VUE_APP_URL + \"/api/images\");\n        images.value = data.images;\n        console.log(\"Fetched images:\", images.value);\n      } catch (error) {\n        console.error(\"Error fetching images:\", error);\n      }\n    };\n    const startSlideShow = () => {\n      isRunning.value = true;\n      console.log(\"Slide show started\");\n      startInterval();\n    };\n    const stopSlideShow = () => {\n      isRunning.value = false;\n      console.log(\"Slide show stopped\");\n      stopInterval();\n    };\n    const speedUp = () => {\n      delay.value = delay.value > 1000 ? delay.value - 1000 : 1000;\n      console.log(\"Speed increased. New delay:\", delay.value);\n      if (isRunning.value) {\n        stopInterval();\n        startInterval();\n      }\n    };\n    const speedDown = () => {\n      delay.value += 1000;\n      console.log(\"Speed decreased. New delay:\", delay.value);\n      if (isRunning.value) {\n        stopInterval();\n        startInterval();\n      }\n    };\n    const setCustomDelay = () => {\n      const newDelay = parseInt(inputDelay.value, 10);\n      if (!isNaN(newDelay) && newDelay >= 1000) {\n        delay.value = newDelay;\n        console.log(\"Custom delay set:\", delay.value);\n        inputDelay.value = \"\"; // Clear the input field\n        if (isRunning.value) {\n          stopInterval();\n          startInterval();\n        }\n      }\n    };\n    const startInterval = () => {\n      timeout = setTimeout(() => {\n        interval = setInterval(() => {\n          if (images.value.length === 0) {\n            console.warn(\"No images available\");\n            return;\n          }\n          currentIndex.value = (currentIndex.value + 1) % images.value.length;\n          console.log(\"Current index:\", currentIndex.value);\n        }, delay.value);\n        console.log(\"Interval started with delay:\", delay.value);\n      }, 0); // Use a timeout to ensure it runs in the next event loop cycle\n    };\n    const stopInterval = () => {\n      clearTimeout(timeout);\n      clearInterval(interval);\n      console.log(\"Interval stopped\");\n    };\n    onMounted(() => {\n      fetchImages();\n      console.log(\"Component mounted\");\n    });\n    watchEffect(() => {\n      if (isRunning.value) {\n        startInterval();\n      } else {\n        stopInterval();\n      }\n      console.log(\"isRunning:\", isRunning.value);\n    });\n    const __returned__ = {\n      images,\n      currentIndex,\n      isRunning,\n      delay,\n      inputDelay,\n      get timeout() {\n        return timeout;\n      },\n      set timeout(v) {\n        timeout = v;\n      },\n      fetchImages,\n      startSlideShow,\n      stopSlideShow,\n      speedUp,\n      speedDown,\n      setCustomDelay,\n      startInterval,\n      stopInterval,\n      ref,\n      onMounted,\n      watchEffect,\n      get fetchData() {\n        return fetchData;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","watchEffect","fetchData","images","currentIndex","isRunning","delay","inputDelay","timeout","fetchImages","data","process","env","VUE_APP_URL","value","console","log","error","startSlideShow","startInterval","stopSlideShow","stopInterval","speedUp","speedDown","setCustomDelay","newDelay","parseInt","isNaN","setTimeout","interval","setInterval","length","warn","clearTimeout","clearInterval"],"sources":["/home/cuongld/Desktop/VueJS/vue3_action/src/views/SlideShow.vue"],"sourcesContent":["<template>\n  <div class=\"p-4\">\n    <div class=\"flex space-x-4 mb-4\">\n      <button @click=\"startSlideShow\" class=\"button start\">Start</button>\n      <button @click=\"stopSlideShow\" class=\"button stop\">Stop</button>\n      <button @click=\"speedUp\" class=\"button speed-up\">Speed Up</button>\n      <button @click=\"speedDown\" class=\"button speed-down\">Speed Down</button>\n      <input\n        v-model=\"inputDelay\"\n        type=\"number\"\n        placeholder=\"Custom delay (ms)\"\n        class=\"input\"\n      />\n      <button @click=\"setCustomDelay\" class=\"button set-delay\">\n        Set Delay\n      </button>\n    </div>\n    <div>\n      <img\n        v-if=\"images.length > 0\"\n        :src=\"images[currentIndex].url\"\n        alt=\"\"\n        class=\"max-w-full\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, watchEffect } from \"vue\";\nimport { fetchData } from \"@/utils/axiosFetchApi\";\n\nconst images = ref([]);\nconst currentIndex = ref(0);\nconst isRunning = ref(false);\nconst delay = ref(5000);\nconst inputDelay = ref(\"\");\nlet timeout = null;\n\nconst fetchImages = async () => {\n  try {\n    const data = await fetchData(process.env.VUE_APP_URL + \"/api/images\");\n    images.value = data.images;\n    console.log(\"Fetched images:\", images.value);\n  } catch (error) {\n    console.error(\"Error fetching images:\", error);\n  }\n};\n\nconst startSlideShow = () => {\n  isRunning.value = true;\n  console.log(\"Slide show started\");\n  startInterval();\n};\n\nconst stopSlideShow = () => {\n  isRunning.value = false;\n  console.log(\"Slide show stopped\");\n  stopInterval();\n};\n\nconst speedUp = () => {\n  delay.value = delay.value > 1000 ? delay.value - 1000 : 1000;\n  console.log(\"Speed increased. New delay:\", delay.value);\n  if (isRunning.value) {\n    stopInterval();\n    startInterval();\n  }\n};\n\nconst speedDown = () => {\n  delay.value += 1000;\n  console.log(\"Speed decreased. New delay:\", delay.value);\n  if (isRunning.value) {\n    stopInterval();\n    startInterval();\n  }\n};\n\nconst setCustomDelay = () => {\n  const newDelay = parseInt(inputDelay.value, 10);\n  if (!isNaN(newDelay) && newDelay >= 1000) {\n    delay.value = newDelay;\n    console.log(\"Custom delay set:\", delay.value);\n    inputDelay.value = \"\"; // Clear the input field\n    if (isRunning.value) {\n      stopInterval();\n      startInterval();\n    }\n  }\n};\n\nconst startInterval = () => {\n  timeout = setTimeout(() => {\n    interval = setInterval(() => {\n      if (images.value.length === 0) {\n        console.warn(\"No images available\");\n        return;\n      }\n\n      currentIndex.value = (currentIndex.value + 1) % images.value.length;\n      console.log(\"Current index:\", currentIndex.value);\n    }, delay.value);\n    console.log(\"Interval started with delay:\", delay.value);\n  }, 0); // Use a timeout to ensure it runs in the next event loop cycle\n};\n\nconst stopInterval = () => {\n  clearTimeout(timeout);\n  clearInterval(interval);\n  console.log(\"Interval stopped\");\n};\n\nonMounted(() => {\n  fetchImages();\n  console.log(\"Component mounted\");\n});\n\nwatchEffect(() => {\n  if (isRunning.value) {\n    startInterval();\n  } else {\n    stopInterval();\n  }\n  console.log(\"isRunning:\", isRunning.value);\n});\n</script>\n\n<style scoped>\n.button {\n  background-color: #4a5568;\n  color: #ffffff;\n  font-weight: bold;\n  padding: 0.5rem 1rem;\n  border-radius: 0.25rem;\n  cursor: pointer;\n}\n\n.button:hover {\n  background-color: #2d3748;\n}\n\n.start {\n  background-color: #3490dc;\n}\n\n.stop {\n  background-color: #e3342f;\n}\n\n.speed-up {\n  background-color: #38a169;\n}\n\n.speed-down {\n  background-color: #f6993f;\n}\n\n.input {\n  border: 1px solid #cbd5e0; /* Set your desired border color */\n  border-radius: 0.25rem;\n  padding: 0.5rem;\n}\n\n.set-delay {\n  background-color: #805ad5;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}