{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-ec29c58c\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"p-4\"\n};\nconst _hoisted_2 = {\n  class: \"flex space-x-4 mb-4\"\n};\nconst _hoisted_3 = [\"src\"];\nimport { ref, onMounted, watchEffect } from \"vue\";\nimport { fetchData } from \"@/utils/axiosFetchApi\";\nimport Cookies from \"js-cookie\";\nexport default {\n  __name: 'SlideShow',\n  setup(__props) {\n    const images = ref([]);\n    const currentIndex = ref(0);\n    const isRunning = ref(false);\n    const delay = ref(5000);\n    const inputDelay = ref(\"\");\n    let interval = null;\n    const fetchImages = async () => {\n      try {\n        // Get the JWT token from the cookie using js-cookie\n        const token = Cookies.get(\"access_token\");\n        console.log(\"Extracted token:\", token);\n\n        // Check if the token is available before making the API call\n        if (token) {\n          // Set the headers with the JWT token\n          const headers = {\n            Authorization: `Bearer ${token}`\n          };\n\n          // Make the API call with the headers\n          const data = await fetchData(process.env.VUE_APP_URL + \"/api/images\", \"GET\", null, headers);\n          images.value = data.images;\n          console.log(\"Fetched images:\", images.value);\n        } else {\n          console.error(\"JWT token not found in the cookie\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching images:\", error);\n      }\n    };\n    const startInterval = () => {\n      stopInterval(); // Stop the previous interval\n      interval = setInterval(() => {\n        if (images.value.length === 0) {\n          console.warn(\"No images available\");\n          return;\n        }\n        currentIndex.value = (currentIndex.value + 1) % images.value.length;\n        console.log(\"Current index:\", currentIndex.value);\n      }, delay.value);\n      console.log(\"Interval started with delay:\", delay.value);\n    };\n    const stopInterval = () => {\n      clearInterval(interval);\n      console.log(\"Interval stopped\");\n    };\n    const startSlideShow = () => {\n      isRunning.value = true;\n      console.log(\"Slide show started\");\n      startInterval();\n    };\n    const stopSlideShow = () => {\n      isRunning.value = false;\n      console.log(\"Slide show stopped\");\n      stopInterval();\n    };\n    const speedUp = () => {\n      delay.value = delay.value > 1000 ? delay.value - 1000 : 1000;\n      console.log(\"Speed increased. New delay:\", delay.value);\n      if (isRunning.value) {\n        startInterval();\n      }\n    };\n    const speedDown = () => {\n      delay.value += 1000;\n      console.log(\"Speed decreased. New delay:\", delay.value);\n      if (isRunning.value) {\n        startInterval();\n      }\n    };\n    const setCustomDelay = () => {\n      const newDelay = parseInt(inputDelay.value, 10);\n      if (!isNaN(newDelay) && newDelay >= 1000) {\n        delay.value = newDelay;\n        console.log(\"Custom delay set:\", delay.value);\n        inputDelay.value = \"\";\n        if (isRunning.value) {\n          startInterval();\n        }\n      }\n    };\n    onMounted(() => {\n      fetchImages();\n      console.log(\"Component mounted\");\n    });\n    watchEffect(() => {\n      if (isRunning.value) {\n        startInterval();\n      } else {\n        stopInterval();\n      }\n      console.log(\"isRunning:\", isRunning.value);\n    });\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"button\", {\n        onClick: startSlideShow,\n        class: \"button start\"\n      }, \"Start\"), _createElementVNode(\"button\", {\n        onClick: stopSlideShow,\n        class: \"button stop\"\n      }, \"Stop\"), _createElementVNode(\"button\", {\n        onClick: speedUp,\n        class: \"button speed-up\"\n      }, \"Speed Up\"), _createElementVNode(\"button\", {\n        onClick: speedDown,\n        class: \"button speed-down\"\n      }, \"Speed Down\"), _withDirectives(_createElementVNode(\"input\", {\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => inputDelay.value = $event),\n        type: \"number\",\n        placeholder: \"Custom delay (ms)\",\n        class: \"input\"\n      }, null, 512), [[_vModelText, inputDelay.value]]), _createElementVNode(\"button\", {\n        onClick: setCustomDelay,\n        class: \"button set-delay\"\n      }, \" Set Delay \")]), _createElementVNode(\"div\", null, [images.value.length > 0 ? (_openBlock(), _createElementBlock(\"img\", {\n        key: 0,\n        src: images.value[currentIndex.value].url,\n        alt: \"\",\n        class: \"max-w-full\"\n      }, null, 8, _hoisted_3)) : _createCommentVNode(\"\", true)])]);\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","watchEffect","fetchData","Cookies","images","currentIndex","isRunning","delay","inputDelay","interval","fetchImages","token","get","console","log","headers","Authorization","data","process","env","VUE_APP_URL","value","error","startInterval","stopInterval","setInterval","length","warn","clearInterval","startSlideShow","stopSlideShow","speedUp","speedDown","setCustomDelay","newDelay","parseInt","isNaN"],"sources":["/home/cuongld/Desktop/VueJS/vue3_action/src/views/SlideShow.vue"],"sourcesContent":["<template>\n  <div class=\"p-4\">\n    <div class=\"flex space-x-4 mb-4\">\n      <button @click=\"startSlideShow\" class=\"button start\">Start</button>\n      <button @click=\"stopSlideShow\" class=\"button stop\">Stop</button>\n      <button @click=\"speedUp\" class=\"button speed-up\">Speed Up</button>\n      <button @click=\"speedDown\" class=\"button speed-down\">Speed Down</button>\n      <input\n        v-model=\"inputDelay\"\n        type=\"number\"\n        placeholder=\"Custom delay (ms)\"\n        class=\"input\"\n      />\n      <button @click=\"setCustomDelay\" class=\"button set-delay\">\n        Set Delay\n      </button>\n    </div>\n    <div>\n      <img\n        v-if=\"images.length > 0\"\n        :src=\"images[currentIndex].url\"\n        alt=\"\"\n        class=\"max-w-full\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, watchEffect } from \"vue\";\nimport { fetchData } from \"@/utils/axiosFetchApi\";\nimport Cookies from \"js-cookie\";\n\nconst images = ref([]);\nconst currentIndex = ref(0);\nconst isRunning = ref(false);\nconst delay = ref(5000);\nconst inputDelay = ref(\"\");\nlet interval = null;\n\nconst fetchImages = async () => {\n  try {\n    // Get the JWT token from the cookie using js-cookie\n    const token = Cookies.get(\"access_token\");\n    console.log(\"Extracted token:\", token);\n\n    // Check if the token is available before making the API call\n    if (token) {\n      // Set the headers with the JWT token\n      const headers = {\n        Authorization: `Bearer ${token}`,\n      };\n\n      // Make the API call with the headers\n      const data = await fetchData(\n        process.env.VUE_APP_URL + \"/api/images\",\n        \"GET\",\n        null,\n        headers\n      );\n\n      images.value = data.images;\n      console.log(\"Fetched images:\", images.value);\n    } else {\n      console.error(\"JWT token not found in the cookie\");\n    }\n  } catch (error) {\n    console.error(\"Error fetching images:\", error);\n  }\n};\n\nconst startInterval = () => {\n  stopInterval(); // Stop the previous interval\n  interval = setInterval(() => {\n    if (images.value.length === 0) {\n      console.warn(\"No images available\");\n      return;\n    }\n\n    currentIndex.value = (currentIndex.value + 1) % images.value.length;\n    console.log(\"Current index:\", currentIndex.value);\n  }, delay.value);\n  console.log(\"Interval started with delay:\", delay.value);\n};\n\nconst stopInterval = () => {\n  clearInterval(interval);\n  console.log(\"Interval stopped\");\n};\n\nconst startSlideShow = () => {\n  isRunning.value = true;\n  console.log(\"Slide show started\");\n  startInterval();\n};\n\nconst stopSlideShow = () => {\n  isRunning.value = false;\n  console.log(\"Slide show stopped\");\n  stopInterval();\n};\n\nconst speedUp = () => {\n  delay.value = delay.value > 1000 ? delay.value - 1000 : 1000;\n  console.log(\"Speed increased. New delay:\", delay.value);\n  if (isRunning.value) {\n    startInterval();\n  }\n};\n\nconst speedDown = () => {\n  delay.value += 1000;\n  console.log(\"Speed decreased. New delay:\", delay.value);\n  if (isRunning.value) {\n    startInterval();\n  }\n};\n\nconst setCustomDelay = () => {\n  const newDelay = parseInt(inputDelay.value, 10);\n  if (!isNaN(newDelay) && newDelay >= 1000) {\n    delay.value = newDelay;\n    console.log(\"Custom delay set:\", delay.value);\n    inputDelay.value = \"\";\n    if (isRunning.value) {\n      startInterval();\n    }\n  }\n};\n\nonMounted(() => {\n  fetchImages();\n  console.log(\"Component mounted\");\n});\n\nwatchEffect(() => {\n  if (isRunning.value) {\n    startInterval();\n  } else {\n    stopInterval();\n  }\n  console.log(\"isRunning:\", isRunning.value);\n});\n</script>\n\n<style scoped>\n.button {\n  background-color: #4a5568;\n  color: #ffffff;\n  font-weight: bold;\n  padding: 0.5rem 1rem;\n  border-radius: 0.25rem;\n  cursor: pointer;\n}\n\n.button:hover {\n  background-color: #2d3748;\n}\n\n.start {\n  background-color: #3490dc;\n}\n\n.stop {\n  background-color: #e3342f;\n}\n\n.speed-up {\n  background-color: #38a169;\n}\n\n.speed-down {\n  background-color: #f6993f;\n}\n\n.input {\n  border: 1px solid #cbd5e0; /* Set your desired border color */\n  border-radius: 0.25rem;\n  padding: 0.5rem;\n}\n\n.set-delay {\n  background-color: #805ad5;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}